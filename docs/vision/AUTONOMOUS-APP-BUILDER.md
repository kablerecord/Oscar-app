# OSQR Autonomous App Builder – V1 Blueprint

**Status:** Vision/Planning (Do not implement until prerequisites met)
**Created:** 2025-12-08
**Source:** ChatGPT planning session
**Prerequisites:**
- OSQR core app launched and stable
- Intelligence Layer (Phase 3) complete
- VS Code Dev Companion v1 stable
- Autonomous Mode proven in controlled environments
- PKV/MSC have real usage data from multiple projects (OSQR, VoiceQuote, etc.)

---

> **Important:** This is the foundation OSQR needs to eventually build entire apps from a single user prompt.
> V1 does not need full autonomy. It only needs the core pieces that make autonomy possible later.

---

## 1. Purpose & Vision

The Autonomous App Builder allows OSQR to:

**Take a user's natural-language app idea → generate a full project blueprint → create all necessary files → scaffold the architecture → and optionally continue in Autonomous Mode until the app is functional.**

This blueprint defines the minimum viable pieces required.

---

## 2. V1 Capabilities (The Minimum Required for Future Autonomy)

### 2.1 Project Blueprint Generator (Core Requirement)

Given a prompt like:

> "I want to build a simple CRM for roofers."

OSQR generates:
- Product Summary
- Tech Stack Recommendation
- Folder Structure
- Routes / Pages
- Data Models
- APIs
- Component List
- Integrations
- TODO Roadmap
- Necessary Files & File List
- Deployment Targets
- Questions OSQR needs answered

This output is **structured, deterministic, and reproducible**.

### 2.2 Project File Scaffold Generator

V1 must create:
- The full folder tree
- Placeholder files
- Minimal working code where possible
- README for the project
- `.osqr-project.json` binding
- `ROADMAP.md` (project-level)
- `PROGRESS.md` (session state)
- `ASSUMPTIONS.md`
- `BLOCKED.md`

### 2.3 Dependency Graph Builder

Takes the blueprint and creates:
- A task tree
- Dependency order
- Tags tasks as:
  - `AI-SAFE`
  - `HUMAN-REVIEW`
  - `FOUNDER-ONLY`

This governs what autonomous mode can safely execute.

### 2.4 Project State Manager

V1 must support:
- Project checkpoints (git tag `checkpoint/...`)
- Project branches (`osqr-autonomous-###`)
- Session summaries
- Rollback guides

---

## 3. Inputs → Outputs

### 3.1 Inputs

- User initial prompt (1–2 sentences)
- Clarifying questions (generated by OSQR)
- Optional user preferences:
  - Stack (Next.js, Node, Python, etc.)
  - Database
  - Authentication
  - Payment provider
  - Target audience
  - App size/complexity

### 3.2 Outputs

OSQR returns:

```
/<project-name>
  ├── app/
  ├── components/
  ├── lib/
  ├── api/
  ├── prisma/
  ├── public/
  ├── README.md
  ├── ROADMAP.md
  ├── PROGRESS.md
  ├── ASSUMPTIONS.md
  ├── BLOCKED.md
  ├── .osqr-project.json
  └── package.json
```

Plus:
- A complete blueprint document
- A dependency graph
- Initial tasks assigned to "Autonomous Mode Ready"
- The ability to immediately continue development autonomously

---

## 4. V1 Architecture

### 4.1 The Pipeline

```
User Idea
   ↓
Clarifying Questions
   ↓
Project Blueprint (machine-readable)
   ↓
Dependency Graph + Task Tree
   ↓
Folder Structure + Files
   ↓
Project Metadata (osqr files)
   ↓
Branch + Checkpoints
   ↓
Ready for Autonomous Mode
```

### 4.2 File Format: Project Blueprint

OSQR must output a structured JSON like:

```json
{
  "appName": "VoiceQuote",
  "summary": "Voice-driven quoting tool for contractors.",
  "stack": {
    "frontend": "Next.js",
    "backend": "Next.js API routes",
    "database": "Postgres",
    "auth": "Clerk",
    "styling": "Tailwind"
  },
  "models": [
    {
      "name": "User",
      "fields": { "id": "string", "email": "string" }
    }
  ],
  "pages": ["Home", "Dashboard", "Settings", "Quotes"],
  "apiRoutes": ["POST /api/quote", "GET /api/quotes"],
  "folderStructure": [
    "app/",
    "app/dashboard/",
    "app/api/quote/"
  ],
  "tasks": [
    { "id": 1, "desc": "Initialize project", "dependsOn": [], "safety": "AI-SAFE" },
    { "id": 2, "desc": "Create UI structure", "dependsOn": [1], "safety": "AI-SAFE" },
    { "id": 3, "desc": "Configure Stripe", "dependsOn": [1], "safety": "FOUNDER-ONLY" }
  ]
}
```

This is the brain of the Project Builder.

---

## 5. V1 Behaviors in Autonomous Mode

Autonomous Mode uses the blueprint to execute tasks safely.

### 5.1 What It CAN Do (AI-SAFE)

- Build folder structure
- Create files
- Generate static pages
- Add placeholder components
- Create basic schemas
- Populate README.md
- Create ROADMAP.md
- Add PROGRESS.md, ASSUMPTIONS.md, BLOCKED.md
- Install dependencies
- Add types
- Add lint + ESLint + TypeScript configs

### 5.2 What It MUST ASK FOR (HUMAN-REVIEW / FOUNDER-ONLY)

- Business logic details
- Database connection secrets
- Payment provider configuration
- Any irreversible changes
- Architecture choices not covered in blueprint

### 5.3 What It MUST NEVER Do

- Deploy anything
- Destroy data
- Write destructive bash commands
- Change main branch
- Delete user code
- Overwrite hand-edited files

---

## 6. Integration Into OSQR's Existing System

### 6.1 PKV Integration

- All blueprint decisions get saved to PKV
- All patterns get added to "Development Principles"
- All app templates become reusable archetypes

### 6.2 MSC Integration

- New coding conventions → added to MSC
- New architectural patterns → added to MSC
- New workflows → added to MSC

**MSC becomes the skill tree that powers future app builds.**

### 6.3 Roadmap Integration

CLOG or Autonomous Mode can update:
- ROADMAP.md
- PROGRESS.md
- BLOCKED.md
- ASSUMPTIONS.md

This keeps development synchronized.

---

## 7. V1 Success Criteria

OSQR V1 Project Builder is successful if:

1. A user can describe an app in 1–2 sentences
2. OSQR generates a complete project blueprint
3. OSQR creates the full folder + file scaffold
4. OSQR creates roadmap + progress files
5. OSQR prepares a new branch with checkpoints
6. Autonomous Mode can continue development safely
7. User is returned a working scaffolded app
8. **The experience feels magical, not technical**

This is the minimum viable step toward: **"OSQR, build my entire app."**

---

## 8. What Comes After V1 (V2/V3 Teaser)

Not immediate, not required now, but future extensions:

- Automatic migrations
- Automatic tests
- Real-time code tracing
- Full end-to-end feature development
- Continuous improvement loops
- Deployment infrastructure
- App monitoring
- OSQR-designed UX flows
- AI-powered business planning
- Pricing engine
- Branding + visual identity builder

**Everything a founder needs to launch a SaaS.**

---

## 9. Technical Implementation Notes (Reference)

### Blueprint Schema (Draft)

```typescript
interface ProjectBlueprint {
  appName: string;
  summary: string;
  stack: {
    frontend: string;
    backend: string;
    database: string;
    auth: string;
    styling: string;
    hosting?: string;
  };
  models: Array<{
    name: string;
    fields: Record<string, string>;
    relations?: string[];
  }>;
  pages: string[];
  apiRoutes: string[];
  folderStructure: string[];
  tasks: Array<{
    id: number;
    desc: string;
    dependsOn: number[];
    safety: 'AI-SAFE' | 'HUMAN-REVIEW' | 'FOUNDER-ONLY';
  }>;
  integrations?: string[];
  questions?: string[]; // Things OSQR needs clarified
}
```

### API Endpoints Required (Reference)

- `POST /api/builder/blueprint` - Generate project blueprint from prompt
- `POST /api/builder/scaffold` - Create files from blueprint
- `GET /api/builder/status` - Check build progress
- `POST /api/builder/clarify` - Answer OSQR's questions
- `POST /api/builder/autonomous` - Start autonomous build mode

---

## 10. Relationship to Other Vision Documents

This document builds on:
- **[VSCODE-DEV-COMPANION.md](./VSCODE-DEV-COMPANION.md)** - The extension that delivers this capability in VS Code
- **ROADMAP.md Phase X** - The lean roadmap entry pointing here

Sequence:
1. Core OSQR app (now)
2. Intelligence Layer (Phase 3)
3. VS Code Dev Companion v1
4. Autonomous Mode (in VS Code)
5. **Autonomous App Builder** (this document)

---

*This document preserved for future reference. Implementation begins after VS Code Dev Companion v1 and Autonomous Mode are stable.*
